$(document).ready(function(){var e={};e.ui={verdicts:["<span class='fa fa-exclamation-triangle'></span>请设置密码复杂度更高的密码","通过;不过复杂度再高一点,更安全","<span class='fa fa-thumbs-up'></span>安全","<span class='fa fa-thumbs-up'></span><span class='fa fa-thumbs-up'></span>很安全","<span class='fa fa-thumbs-up'></span><span class='fa fa-thumbs-up'></span><span class='fa fa-thumbs-up'></span>非常安全!"],showPopover:!0,popoverPlacement:"top"},e.common={onLoad:function(){$("#messages").text("Start typing password")},onKeyUp:function(e,n){if(n.verdictLevel<1){var a=$("#next_button");a.attr("disabled","disabled")}else{var a=$("#next_button");a.removeAttr("disabled")}}},$(":password").pwstrength(e)}),$(document).ready(function(){$(".registration-form .div-group:first").fadeIn("slow"),$('.registration-form input[type="text"], .registration-form input[type="password"], .registration-form textarea').on("focus",function(){$(this).removeClass("input-error")});var e=!0;$("#get_verify").click(function(){var n=$(this);$(this).prop("disabled",!0);var a=$("#id_telephone").val(),i=$("#countries_phone").val(),t=null,r=60;return t=setInterval(function(){$("#get_verify").html(r+"秒后重发"),r--,0==r&&(clearInterval(t),n.prop("disabled",!1),n.html("重新发送"),r=60)},1e3),("China"!=i&&a.length>6||"China"==i&&a.length>=15)&&$.ajax({type:"post",url:baseUrl+"/verify_code/send",data:{phone:a},dataType:"json",success:function(n){1==n&&(e=!0),0==n&&alert("验证码获取失败")}}),!1});var n={};$(".registration-form #first-page-next-btn").on("click",function(){var a=$(this).parents(".div-group"),i=!0;a.find('input[name="phone"]'),a.find('input[name="verifyCode"]'),a.find('input[type="password"]'),a.find('input[name="email"]');if(a.find('input[name="phone"], input[name="verifyCode"], input[type="password"], input[name="email"]').each(function(){if("China"==$("#countries_phone").val()&&$('input[name="phone"]').val().length<15)return $(this).addClass("input-error"),i=!1,!1;if("China"!=$("#countries_phone").val()&&$('input[name="phone"]').val().length<6)return $(this).addClass("input-error"),i=!1,!1;if($('input[name="verifyCode"]').val().length<6)return $("#id_verify").addClass("input-error"),i=!1,!1;if(""==$("#id_password").val())return $("#id_password").addClass("input-error"),i=!1,!1;if(""==$(this).val())return $(this).addClass("input-error"),i=!1,!1;var e=$("#id_email").val();return e.indexOf("@")==-1||e.indexOf(".")==-1?($("#id_email").addClass("input-error"),i=!1,!1):void $(this).removeClass("input-error")}),e){if(i){a.fadeOut(400,function(){$("#page1").next().fadeIn()});var t=$.trim($("#id_email").val());n.email=t,n.password=$("#id_password").val(),n.phone=$("#id_telephone").val(),n.country=$("#countries_phone").val(),n.verify_code=$("#id_verify").val(),n.referral_code=$("#id_referral_code").val()}}else alert("请获取手机验证码!")}),$(".registration-form .btn-previous").on("click",function(){$(this).parents("#page2").fadeOut(400,function(){$(this).prev().fadeIn()})}),$(".registration-form #investor-type-next-btn").on("click",function(){var e=$(this).parents("#page2"),a=!0,i=$("input[name=is_international_investor]:checked").val();e.find('input[name="is_international_investor"]').each(function(){$('input[name="is_international_investor"]').is(":checked")?$(this).removeClass("input-error"):($(this).addClass("input-error"),a=!1,$(".error-div").html("<div class='alert alert-warning'>请选择您的投资者类型</div>"))}),a&&(console.log(i),n.is_international_investor=$(".form-group").find("input[type='radio']:checked").val(),"True"==i?e.fadeOut(400,function(){$("#international_page3").fadeIn()}):e.fadeOut(400,function(){$("#american_page3").fadeIn()}))}),$("#american-submit").on("click",function(){return $('input[name="questionaire_answer"]').is(":checked")?$('input[name="american-agree"]').is(":checked")?$.ajax({type:"post",url:baseUrl+"/auth/signup",data:n,success:function(e){if(1==e.code){var n=e.body;$.cookie("mx_token",n.mx_token,{expires:30}),$.cookie("mx_secret",n.mx_secret,{expires:30}),window.location.href="/"}else 1!=e.code&&$("#page3-error-div").html("<div class='alert alert-warning'>"+e.msg+"</div>")}}):$("#page3-error-div").html("<div class='alert alert-warning'>请同意网站的使用条款和隐私协议</div>"):$("#page3-error-div").html("<div class='alert alert-warning'>请选择您的投资者条件</div>"),!1}),$("#international-submit").on("click",function(){return $('input[name="international-agree"]').is(":checked")?$('input[name="international-agree"]').is(":checked")&&$.ajax({type:"post",url:baseUrl+"/auth/signup",data:n,success:function(e){if(1==e.code){var n=e.body;$.cookie("mx_token",n.mx_token,{expires:30}),$.cookie("mx_secret",n.mx_secret,{expires:30}),window.location.href="/"}else 1!=e.code&&$("#page3-error-div").html("<div class='alert alert-warning'>"+e.msg+"</div>")}}):$("#international-page3-error-div").html("<div class='alert alert-warning'>请同意网站的使用条款和隐私协议</div>"),!1})});