var countdown=6,b_checkPhone=!1,b_checkPwd=!1,b_checkEmail=!1,b_verify_code=!1;$(function(){function e(){var e=document.getElementById("phone"),n=/\d{11}/;return n.test(e.value)?(b_checkPhone=!0,!0):($("#phone").after("<p style='text-align: center; color: #900'>请输入正确的手机号码</P>"),$("#phone").focus(function(){$("#phone").next("p").remove()}),!1)}function n(){var e=document.getElementById("pwd");return e.value.length<6?($("#pwd").after("<p style='text-align: center; color: #900'>密码长度不能小于6位</P>"),$("#pwd").focus(function(){$("#pwd").next("p").remove()}),!1):(b_checkPwd=!0,!0)}function o(){var e=$("#email").val();return e.indexOf("@")<=0?($("#email").after("<p style='text-align: center; color: #900'>邮箱格式不正确</P>"),$("#email").focus(function(){$("#email").next("p").remove()}),!1):(b_checkEmail=!0,!0)}$("#yzm").click(function(){function n(e){0==c?(e.prop("disabled",!1),e.val("获取验证码"),clearInterval(t),e.css("border","1px solid #0d2a78"),c=60):(e.css("border"," 0px"),--c,e.prop("disabled",!0),e.val(""+c+"s"))}var o={phone:"+86 "+$("#phone").val()};if(e(),b_checkPhone){var t,c=60;t=setInterval(function(){n($("#yzm"))},1e3),0==c&&clearInterval(t),$.ajax({type:"post",url:baseUrl+"/verify_code/send",data:o,success:function(e){}})}return!1}),$("#signUp").click(function(){$("p").remove(),e()&&n()&&o();var t=$.cookie("key_cookie"),c={phone:"+86 "+$("#phone").val(),verify_code:$("#id_verify").val(),password:$("#pwd").val(),email:$("#email").val(),questions:t};return $("#id_verify").val().length>=6&&(b_verify_code=!0),b_checkPhone&&b_checkPwd&&b_checkEmail&&b_verify_code&&$.ajax({type:"post",url:baseUrl+"/auth/signup",data:c,success:function(e){1==e.code?($("form").remove(),$("div").remove(".bg-logo"),$(".mian").append("<p style='font-size: 18px; color: #0d2a78; letter-spacing: 1px; text-align: center; margin: 0 auto; padding-top: 230px; line-height: 2em;'>恭喜您"+e.msg+"</p>")):(e.code=-1)&&$("#infor").html(e.msg)}}),!1})});