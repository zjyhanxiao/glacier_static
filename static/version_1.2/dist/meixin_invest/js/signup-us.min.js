$(document).ready(function(){$(".registration-form .div-group:first").fadeIn("slow"),$('.registration-form input[type="text"], .registration-form input[type="password"], .registration-form textarea').on("focus",function(){$(this).removeClass("input-error")});var e=!0;$("#get_verify").click(function(){var i=$(this);$(this).prop("disabled",!0);var n=$("#id_telephone").val(),a=$("#countries_phone").val(),t=null,r=60;return t=setInterval(function(){$("#get_verify").html(r+"秒后重发"),r--,0==r&&(clearInterval(t),i.prop("disabled",!1),i.html("重新发送"),r=60)},1e3),("China"!=a&&n.length>6||"China"==a&&n.length>=15)&&$.ajax({type:"post",url:baseUrl+"/verify_code/send",data:{phone:n},dataType:"json",success:function(i){1==i&&(e=!0),0==i&&alert("验证码获取失败")}}),!1}),$(".registration-form #first-page-next-btn").on("click",function(){var i=$(this).parents(".div-group"),n=!0;i.find('input[name="phone"]'),i.find('input[name="verifyCode"]'),i.find('input[type="password"]'),i.find('input[name="email"]');if(i.find('input[name="phone"], input[name="verifyCode"], input[type="password"], input[name="email"]').each(function(){if("China"==$("#countries_phone").val()&&$('input[name="phone"]').val().length<15)return $(this).addClass("input-error"),n=!1,!1;if("China"!=$("#countries_phone").val()&&$('input[name="phone"]').val().length<6)return $(this).addClass("input-error"),n=!1,!1;if($('input[name="verifyCode"]').val().length<6)return $("#id_verify").addClass("input-error"),n=!1,!1;if(""==$("#id_password").val())return $("#id_password").addClass("input-error"),n=!1,!1;if(""==$(this).val())return $(this).addClass("input-error"),n=!1,!1;var e=$("#id_email").val();return e.indexOf("@")==-1||e.indexOf(".")==-1?($("#id_email").addClass("input-error"),n=!1,!1):void $(this).removeClass("input-error")}),e){if(n){i.fadeOut(400,function(){$("#page1").next().fadeIn()});var a=$.trim($("#id_email").val());data.email=a,data.password=$("#id_password").val(),data.phone=$("#id_telephone").val(),data.country=$("#countries_phone").val(),data.verify_code=$("#id_verify").val(),data.referral_code=$("#id_referral_code").val()}}else alert("请获取手机验证码!")}),$(".registration-form .btn-previous").on("click",function(){$(this).parents("#page2").fadeOut(400,function(){$(this).prev().fadeIn()})}),$(".registration-form #investor-type-next-btn").on("click",function(){var e=$(this).parents("#page2"),i=!0,n=$("input[name=is_international_investor]:checked").val();e.find('input[name="is_international_investor"]').each(function(){$('input[name="is_international_investor"]').is(":checked")?$(this).removeClass("input-error"):($(this).addClass("input-error"),i=!1,$(".error-div").html("<div class='alert alert-warning'>请选择您的投资者类型</div>"))}),i&&(console.log(n),data.is_international_investor=$(".form-group").find("input[type='radio']:checked").val(),"True"==n?e.fadeOut(400,function(){$("#international_page3").fadeIn()}):e.fadeOut(400,function(){$("#american_page3").fadeIn()}))}),$("#american-submit").on("click",function(){return $('input[name="questionaire_answer"]').is(":checked")?$('input[name="american-agree"]').is(":checked")?$.ajax({type:"post",url:baseUrl+"/auth/signup",data:data,success:function(e){if(1==e.code){var i=e.body;$.cookie("mx_token",i.mx_token,{expires:30}),$.cookie("mx_secret",i.mx_secret,{expires:30}),window.location.href="/"}else 1!=e.code&&($("#page3-error-div").html("<div class='alert alert-warning'>"+e.msg+"</div>"),window.location.href="/singup-us.html")}}):$("#page3-error-div").html("<div class='alert alert-warning'>请同意网站的使用条款和隐私协议</div>"):$("#page3-error-div").html("<div class='alert alert-warning'>请选择您的投资者条件</div>"),!1}),$("#international-submit").on("click",function(){return $('input[name="international-agree"]').is(":checked")?$('input[name="international-agree"]').is(":checked")&&$.ajax({type:"post",url:baseUrl+"/auth/signup",data:data,success:function(e){if(1==e.code){var i=e.body;$.cookie("mx_token",i.mx_token,{expires:30}),$.cookie("mx_secret",i.mx_secret,{expires:30}),window.location.href="/"}else 1!=e.code&&($("#page3-error-div").html("<div class='alert alert-warning'>"+e.msg+"</div>"),window.location.href="/singup-us.html")}}):$("#international-page3-error-div").html("<div class='alert alert-warning'>请同意网站的使用条款和隐私协议</div>"),!1})});