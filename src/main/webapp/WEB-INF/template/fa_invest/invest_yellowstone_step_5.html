<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0'/>
    <title>
        美信金融|投资流程
    </title>
    <script src="/static/vendor/js/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="/static/dist/meixin_invest/js/jquery.cookie.min.js"></script>
    <script src="/static/meixin_invest/js/is_ok.js"></script>
    <link rel="stylesheet" href="/static/vendor/css/bootstrap.min.css">
    <link href="/static/dist/meixin_invest/css/base.min.css" rel="stylesheet">
    <link href="/static/dist/meixin_invest/css/detail-new.min.css" rel="stylesheet">
    <link href="/static/dist/meixin_invest/css/index.min.css" rel="stylesheet">
    <link href="/static/meixin_invest/css/fa_invest.css" rel="stylesheet">
    <link href="/static/meixin_invest/css/agreement-forms.css" rel="stylesheet">
    <style>

        #signature-box {
            width: 800px;
            height: 250px;
        }

        #signature-line {
            padding: 0 0 0 0;
            margin: 0 0 0 0;
            border: 2px dotted #000;

        }

        #signature-reset-button {
            margin-top: 20px;
            margin-bottom: 25px;
        }

    </style>
    <#include "includes/oneapm.html" />
    <#include "includes/ga.html" />
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?36100da860ed74085d2bdd67bdbdbf5e";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
    <!--[if lt IE 9]>
    <script src="/static/vendor/js/html5shiv"></script>
    <script src="/static/vendor/js/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div id="wrapper" class="customer">
    <div class="container-fluid">
        <section class="text-center" style="margin-top: 70px;">
            <div class="row">
                <div class="col-sm-10 col-sm-offset-1">
                    <div class="fa-steps-bullets international-bullets-extra-styles yellow-bullets-point">
                        <div style="width:19%"><p><span>1</span></p>个人信息</div>
                        <div><p><span>2</span></p>合规信息</div>
                        <div><p><span>3</span></p>护照证件上传</div>
                        <div><p><span>4</span></p>地址证明上传</div>
                        <div><p class="active"><span>5</span></p>签字确认</div>
                        <hr/>
                        <span class="clearfix"></span>
                    </div>
                    <form class="fa-steps col-sm-10 col-sm-offset-1" data-parsley-validate>
                        <div class="step-section payment-section text-left radio-custom label-left">
                            <label>投资金额($)</label>
                            <input data-parsley-pattern="/^([1-9][0-9]{0,1}0000)$|^([1-9][0-9]{0,1}[5]000)$/"
                                   data-parsley-pattern-message="最低投资金额：$10,000，必须为10000的倍数" id="invest-amount"
                                   name="invest-amount"
                                   class="form-control"
                                   placeholder="最低投资金额：$10,000，必须为10000的倍数" required=""/>
                            <div>
                                <p>您的出款银行信息</p>
                                <label>银行名称</label>
                                <input id="bank-name" class="form-control"
                                       placeholder="Bank Name"
                                       required/>
                                <label>银行地址</label>
                                <input id="bank-address" class="form-control"
                                       placeholder="Bank Address 例如“人民路1号”请填写“Renminlu 1”"/>
                                <label>银行账户号码</label>
                                <input id="bank-account-number" class="form-control"
                                       placeholder="Bank Account Number" required/>
                                <label>银行账户姓名</label>
                                <input id="bank-account-name" class="form-control" placeholder="Name On Account"
                                       required/>
                                <label>银行SwiftCode</label>
                                <input id="bank-swift-code" class="form-control"
                                       placeholder="SwiftCode / 国际投资人填写"
                                       data-parsley-required-message="swiftCode和ABA Number至少填写一项" required/>
                                <label>ABA Number</label>
                                <input id="bank-routing-number" class="form-control"
                                       placeholder="9 Digit Bank Routing Number / 美国投资人填写" maxlength="9"
                                       data-parsley-required-message="swiftCode和ABA Number至少填写一项" required/>
                                <!--<label>银行电话号码</label>
                                <input id="bank-telephone-number" class="form-control"
                                       placeholder="Bank Telephone Number" required/>
                                <label>银行传真号码</label>
                                <input id="bank-fax-number" class="form-control" placeholder="Bank Fax Number"/>-->
                            </div>
                            <section>
                                <p>请认真查看以下文件并确认所填写的信息无误?如不确认,请联系invest@meixinfinance.com</p>
                                <div class="payment-option">
                                    <!--<div id="agreements-preview">
                                        <input type="checkbox" name="subscription-agreement-confirm"
                                               required="" data-parsley-required-message="请确认所填写的信息无误"/>
                                        <label><span><span class="invest-check-mark"></span></span><a href="javascript:;">Due Diligence
                                            Request Form
                                            个人投资人身份信息表</a></label><br>
                                        <input type="checkbox" name="fatca-confirm" required=""
                                               data-parsley-required-message="请确认个人投资人身份信息表的信息无误"/>
                                        <label><span><span class="invest-check-mark"></span></span><a href="javascript:;">Subscription
                                            Document 基金申购协议</a></label><br>
                                        <input type="checkbox" name="due-diligence-confirm" required=""
                                               data-parsley-required-message="请确认基金申购协议的信息无误"/>
                                        <label><span><span class="invest-check-mark"></span></span><a href="javascript:;">FATCA Individual
                                            Self-Certification
                                            美国海外账户税收遵从法个人认证表</a></label><br>
                                        <input id="w-8ben-confirm" class="w8-link" type="checkbox"
                                               name="w-8ben-confirm" required=""
                                               data-parsley-required-message="请确认美国预提税及申报受益所有人之外国人身份证明的信息无误"/>
                                        <label class="w8-link"><span><span class="invest-check-mark"></span></span><a href="javascript:;">W-8BEN
                                            美国预提税及申报受益所有人之外国人身份证明(个人)</a></label><br>
                                        <a href="/static/meixin_invest/doc/Meixin Fund SPC Limited - Portfolio Supplement.pdf" target="_blank">Meixin Fund SPC Limited - Portfolio
                                            Supplement</a><br>
                                        <a href="/static/meixin_invest/doc/PPM - Meixin Fund SPC.pdf"
                                           target="_blank">PPM - Meixin Fund SPC</a>
                                    </div>-->

                                </div>
                                <div class="clearfix"></div>
                                <div><img id="post_pic" src="${identity_url}" width="100%"/></div>
                                <div>
                                    <p>请在下方区域用按住鼠标左键并滑动鼠标以签名确认</p>
                                    <p>注意: 签名需与身份证件上所提供的签名一致(如上图)</p>
                                </div>
                                <div class="clearfix"></div>
                                <div>
                                    <div id="signature-box">
                                        <img style="top: auto; position: absolute !important; min-width: 90px !important; max-width: 180px !important; width: 10% !important; border: none !important; padding: 0px !important; margin: 0px !important; box-shadow: 0px 0px 0px !important; display: block;"
                                             src="data:image/gif;base64,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">

                                        <div id="signature-line">
                                        </div>
                                    </div>
                                    <button id="signature-reset-button" type="button"
                                            onclick="$('#signature-line').jSignature('clear')">重新签名
                                    </button>
                                    <br/>
                                    <div class="clearfix"></div>
                                    <p>本人声明，本人提供的所有信息均真实准确并同意在内容有任何变化的情况下一电话或邮件形式通知美信。必要时，本人授权美信金融对资料的准确性进行确认。</p>
                                    <p>
                                        此处输入本人签名并通过网络发送之前，本人确认，阅读并已了解申购过程中提供的所有信息；本人了解同意此签名同等于手写签名；本人希望美信金融及其关联合作伙伴信赖此签名，同时授权美信金融在必要时可以使用此签名人作为确认依据；本人自愿受其约束。</p>
                                </div>
                            </section>

                        </div>

                        <div class="step-navigation">
                            <button type="button" class="previous btn btn-primary pull-left">返回</button>

                            <button type="fasubmit" id="submit_step_five" class="btn btn-primary pull-right"><span
                                    class="glyphicon glyphicon-refresh spinning"
                                    style="display: none;"></span><span>完成</span></button>
                            <span class="clearfix"></span>
                        </div>
                    </form>
                </div>

            </div>
        </section>
    </div>
</div>
<link rel="shortcut icon" type="image/png" href="/static/dist/meixin_invest/img/favicon.png">
<link rel="stylesheet" href="/static/vendor/css/font-awesome.min.css">
<script src="/static/vendor/js/jquery-ui.min.js" type="text/javascript"></script>
<script src="/static/vendor/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/static/dist/meixin_invest/js/navi.min.js" type="text/javascript"></script>
<script>
    $(document).ready(function () {
        $('#wechat-popover').popover({
            html: true,
            placement: 'bottom',
            trigger: 'hover',
            content: '<img style="width: 200px;padding:0;margin:0;" src="/static/meixin_invest/img/meixin_new_qr_code_300x300.jpg" />'
        });
    });
</script>
<script>
    $(function () {
        $("#signature-line").jSignature({width: 800, height: 250});
        var order_number = getUrlParam("order_number");

        var b_update_bank_profile = false,
                b_update_profile = false,
                b_commit_order = false;

        //验证登录
        var mx_token = $.cookie('mx_token'),
                mx_secret = $.cookie('mx_secret');
        cookie_tooken = {mx_token: mx_token, mx_secret: mx_secret};
        Ajax_Data({
            "url": baseUrl + "/auth/authentication",
            "data": cookie_tooken,
            "fn": is_login,
            "fail_fn": login_fail
        });
        function login_fail() {
            window.location = 'https://www.meixinfinance.com/login';
        }

        //is_login  调取登录接口
        function is_login(res) {
            $('.navbar ul li:last-child').html('<a class="btn btn-min-width" href="/investor/dashboard">我的账户</a>');
            $('.navbar ul li:nth-last-child(2)').html('<a class="btn btn-min-width-sm" href="/logout">退出</a>');
            $('.ajax_wait p,.ajax_wait').hide();

            // 获取投资金额
            var get_invest_data = {};
            get_invest_data.order_number = order_number;
            get_invest_data = $.extend({}, get_invest_data, cookie_tooken);
            Ajax_Data({
                "url": baseUrl + "/order/" + order_number,
                "data": get_invest_data,
                "fn": invest_data
            });
            // 获取bank信息
            var get_bank_data = cookie_tooken;
            Ajax_Data({
                "url": baseUrl + "/profile/bank/get",
                "data": get_bank_data,
                "fn": get_bank_profile
            });
//获取文档信息
            var product_document_data = {"product_id": 8};
            product_document_data = $.extend({}, product_document_data, cookie_tooken);
            Ajax_Data({
                "url": baseUrl + "/product_document/get",
                "data": product_document_data,
                "fn": product_document
            });
            function product_document(res) {
                var div = $('<div id="agreements-preview"></div>');
                $.each(res, function (key) {
                    switch (res[key].need_check) {
                        case true:
                            div.append('<input type="checkbox" name=' + res[key].document_name + ' required="" data-parsley-required-message="请确认所填写的' + res[key].document_name + '信息无误"/><label><span><span class="invest-check-mark"></span></span><a href="javascript:;" class="get_pdf" data-document-id=' + res[key].id + '>' + res[key].document_name + '</a></label><br>');
                            break;
                        case false:
                            div.append('<a href=' + res[key].url + ' target="_blank">' + res[key].document_name + '</a><br>');
                            break;
                    }
                });
                $('.payment-option').append(div);
                $('#agreements-preview').find('a.get_pdf').on('click', function () {
                    var result = "";
                    var $this = $(this);
                    var populate_data = {};
                    populate_data.document_id = $(this).attr('data-document-id');
                    populate_data.invest_amount = $('#invest-amount').val();
                    populate_data = $.extend({}, populate_data, cookie_tooken);
                    Ajax_Data({
                        "url": baseUrl + "/product_document/populate",
                        "data": populate_data,
                        "async": false,
                        "fn": populate
                    });
                    function populate(res) {
                        result = res;
                    }

                    if (result.length > 0) {
                        window.open(result, "_blank");
                    }
                    return false;
                });
            }

            //获取profile信息
            var get_profile_data = {
                "fields": "passport_photo,signature"
            };
            get_profile_data = $.extend({}, get_profile_data, cookie_tooken);
            Ajax_Data({
                "url": baseUrl + "/profile/get",
                "data": get_profile_data,
                "fn": get_profile
            });

            $('#submit_step_five').on('click', function () {
                atLeastOne();
                if ($('.fa-steps').parsley().validate()) {
                    $('.ajax_wait').show();
                    setTimeout(function () {
                        $('.ajax_wait p').show();
                    }, 3e3);
                    var jSignatureDefult = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAD6CAYAAABZPSO8AAAPuklEQVR4Xu3XMQ0AAAzDsJU/6bHI5RGoZO3JzhEgQIAAAQIECBAgQCASWLRjhgABAgQIECBAgAABAidAPAEBAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAgIED8AAECBAgQIECAAAECmYAAyagNESBAgAABAgQIECAgQPwAAQIECBAgQIAAAQKZgADJqA0RIECAAAECBAgQICBA/AABAgQIECBAgAABApmAAMmoDREgQIAAAQIECBAg8AaQAPsPrlGDAAAAAElFTkSuQmCC";
                    if ($('#signature-line').jSignature('getData') == jSignatureDefult) {
                        is_success = false;
                        $('#signature-box').next().after('<ul class="parsley-errors-list filled"><li class="parsley-required">请填写您的签名！</li></ul>');
                        return;
                    } else {
                        //上传bank信息
                        var update_bank_data = {};
                        update_bank_data.bank_name = $('#bank-name').val();
                        update_bank_data.bank_address = $('#bank-address').val();
                        update_bank_data.account_number = $('#bank-account-number').val();
                        update_bank_data.account_name = $('#bank-account-name').val();
                        update_bank_data.swift_code = $('#bank-swift-code').val();
                        update_bank_data.routing_number = $('#bank-routing-number').val();
                        update_bank_data = $.extend({}, update_bank_data, cookie_tooken);
                        Ajax_Data({
                            "type": "post",
                            "url": baseUrl + "/profile/bank/update",
                            "data": update_bank_data,
                            "fn": update_bank_profile
                        });

                        //上传profile信息
                        var update_profile_data = {};
                        update_profile_data.passport_photo = passport_photo;
                        update_profile_data.signature = $('#signature-line').jSignature('getData');
                        update_profile_data = $.extend({}, update_profile_data, cookie_tooken);
                        Ajax_Data({
                            "type": "post",
                            "url": baseUrl + "/profile/update",
                            "data": update_profile_data,
                            "fn": update_profile
                        });

                        // 提交订单
                        var order_commit_data = {};
                        order_commit_data.invest_amount = $('#invest-amount').val();
                        order_commit_data.order_number = order_number;
                        order_commit_data = $.extend({}, order_commit_data, cookie_tooken);
                        Ajax_Data({
                            "type": "post",
                            "url": baseUrl + "/order/commit",
                            "data": order_commit_data,
                            "fn": commit_order
                        });
                        return false;
                    }
                }
            })
        }

        //SwiftCode和ABA Number 二选一或者都选
        function atLeastOne() {
            $('#bank-swift-code,#bank-routing-number').removeAttr('required');
            var swiftCode = $('#bank-swift-code');
            var abaNum = $('#bank-routing-number');
            if (swiftCode.val() == '' && abaNum.val() == '') {
                $('#bank-swift-code,#bank-routing-number').attr('required', 'true');
            } else {
                if (swiftCode.val() != '') {
                    $('#bank-swift-code,#bank-routing-number').removeAttr('required');
                }
                if (abaNum.val() != '') {
                    $('#bank-swift-code,#bank-routing-number').removeAttr('required');
                }
            }
        };

        // 获取用户投资金额
        function invest_data(d) {
            if (d.invest_amount != '' && d.invest_amount != null) {
                $('#invest-amount').val(d.invest_amount);
            }
        }

        //获取bank信息
        function get_bank_profile(d) {
            if (d.bank_name != "" && d.bank_name != null) {
                $('#bank-name').val(d.bank_name);
            }
            if (d.bank_address != "" && d.bank_address != null) {
                $('#bank-address').val(d.bank_address);
            }
            if (d.account_number != "" && d.account_number != null) {
                $('#bank-account-number').val(d.account_number);
            }
            if (d.account_name != "" && d.account_name != null) {
                $('#bank-account-name').val(d.account_name);
            }
            if (d.swift_code != "" && d.swift_code != null) {
                $('#bank-swift-code').val(d.swift_code);
            }
            if (d.routing_number != "" && d.routing_number != null) {
                $('#bank-routing-number').val(d.routing_number);
            }
        }

        // 获取profile信息
        function get_profile(d) {
            if (d.passport_photo != '' && d.passport_photo != null) {
                $("#post_pic").attr('src', d.passport_photo);
            }
            if (d.signature != '' && d.signature != null) {
                $('#signature-line').jSignature("setData", d.signature);
            }
        }

        //提交bank信息
        function update_bank_profile() {
            console.log('开户银行信息提交成功');
            b_update_bank_profile = true;
        }

        //更新profile信息
        function update_profile(res) {
            console.log('信息提交成功');
            b_update_profile = true;
        }

        // 提交订单
        function commit_order() {
            b_commit_order = true;
            window.location="http://lcoal.meixinfinance.com:8081/invest_yellowstone_success.html";
        }
    });
</script>
<script src="/static/dist/meixin_invest/js/bootstrap-formhelpers-yellowstone.min.js" type="text/javascript"></script>
<script src="/static/dist/meixin_invest/js/bootstrap-formhelpers-countries.zh_CN.min.js"
        type="text/javascript"></script>
<script src="/static/dist/meixin_invest/js/bootstrap-formhelpers-phone.min.js" type="text/javascript"></script>
<script src="/static/meixin_invest/js/parsley.min.js"></script>
<script src="/static/dist/meixin_invest/js/fa_invest_general.min.js"></script>
<script src="/static/dist/meixin_invest/js/fa.min.js"></script>
<script src="/static/dist/meixin_invest/js/jSignature.min.js" type="text/javascript"></script>
</body>
</html>
