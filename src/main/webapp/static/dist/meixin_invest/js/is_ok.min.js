function getUrlParam(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?unescape(a[2]):null}function setHeight(){$(".ajax_wait").height($(window).height())}var is_new=!0,is_old=!1,is_success=!1,cookie_tooken={},order_id="",token=$.cookie("mx_sid");token||(window.location="https://www.meixinfinance.com");var Ajax_Data=function(t){$.ajax({type:t.type||"get",url:t.url,data:t.data,timeout:5e3,success:function(e){console.log(t.url+": "+JSON.stringify(e));var a=e.body||null;e&&e.code&&e.code==-1&&(window.location="https://www.meixinfinance.com/login"),e&&e.code&&0==e.code&&$(".ajax_wait_gif img").attr("url","/dist/meixin_invest/img/net_lazy.png"),e&&e.code&&1==e.code&&t.fn&&t.fn(a)},complete:function(t,e){"timeout"==e&&$(".ajax_wait_gif img").attr("url","/dist/meixin_invest/img/net_lazy.png")}})},baseUrl="http://bj.meixinfinance.com:8081/apiv2";$(function(){function t(t){if($(".navbar ul li:last-child").html('<a class="btn btn-min-width" href="/investor/dashboard">我的账户</a>'),$(".navbar ul li:nth-last-child(2)").html('<a class="btn btn-min-width-sm" href="/logout">退出</a>'),$(".ajax_wait p,.ajax_wait").hide(),is_new){var o={fields:"source_of_income,tax_country,tax_card_type,tax_card_number"},o=($.extend({},cookie_tooken,o),$.extend({},o,cookie_tooken));Ajax_Data({url:baseUrl+"/profile/get",data:o,fn:e}),$("#submit_step_two").on("click",function(){$(".ajax_wait").show(),setTimeout(function(){$(".ajax_wait p").show()},3e3),order_id="7b601f8239fd106cb9a452984ad966b5";var t={};return t.source_of_income=$("#source-of-investment").val(),t.tax_country=$("#countries_states").val(),t.tax_card_type=$("#tax-number-type").val(),t.tax_card_number=$("#tax-id-number").val(),t=$.extend({},t,cookie_tooken),Ajax_Data({type:"post",url:baseUrl+"/profile/update",data:t,fn:a}),!1})}else if(is_old){var o={fields:"source_of_income,tax_country,tax_card_type,tax_card_number"},o=($.extend({},cookie_tooken,o),$.extend({},o,cookie_tooken));Ajax_Data({url:baseUrl+"/profile/get",data:o,fn:e}),$("#submit_step_two").on("click",function(){$(".ajax_wait").show(),setTimeout(function(){$(".ajax_wait p").show()},3e3),order_id="7b601f8239fd106cb9a452984ad966b5";var t={};return t.source_of_income=$("#source-of-investment").val(),t.tax_country=$("#countries_states").val(),t.tax_card_type=$("#tax-number-type").val(),t.tax_card_number=$("#tax-id-number").val(),t=$.extend({},t,cookie_tooken),Ajax_Data({type:"post",url:baseUrl+"/profile/update",data:t,fn:a}),!1})}}function e(t){""!=t.source_of_income&&null!=t.source_of_income&&$("#source-of-investment").val(t.source_of_income),""!=t.tax_country&&null!=t.tax_country&&$("#countries_states").val(t.tax_country),""!=t.tax_card_type&&null!=t.tax_card_type&&$("#tax-number-type").val(t.tax_card_type),""!=t.tax_card_number&&null!=t.tax_card_number&&$("#tax-id-number").val(t.tax_card_number)}function a(t){$(".ajax_wait p,.ajax_wait").hide(),window.location.href="http://lcoal.meixinfinance.com:8081/fa_invest/invest_yellowstone_step_4.html?order_id="+order_id}setTimeout(function(){$(".ajax_wait p").show()},3e3);var o=$.cookie("mx_token"),n=$.cookie("mx_secret");cookie_tooken={mx_token:o,mx_secret:n},Ajax_Data({url:baseUrl+"/auth/is_login",data:cookie_tooken,fn:t})});