var b_checkPhone=!1,b_checkPwd=!1,b_checkEmail=!1,b_verify_code=!1;$(function(){function e(){var e=document.getElementById("phone"),c=/\d{11}/;return c.test(e.value)?(b_checkPhone=!0,!0):($("#phone").after("<p style='text-align: center; color: #900'>请输入正确的手机号码</P>"),$("#phone").focus(function(){$("#phone").next("p").remove()}),!1)}function c(){var e=document.getElementById("pwd");return e.value.length<6?($("#pwd").after("<p style='text-align: center; color: #900'>密码长度不能小于6位</P>"),$("#pwd").focus(function(){$("#pwd").next("p").remove()}),!1):(b_checkPwd=!0,!0)}function o(){var e=$("#email").val();return e.indexOf("@")<=0?($("#email").after("<p style='text-align: center; color: #900'>邮箱格式不正确</P>"),$("#email").focus(function(){$("#email").next("p").remove()}),!1):(b_checkEmail=!0,!0)}$("#yzm").click(function(){function c(e){0==r?(e.prop("disabled",!1),e.val("获取验证码"),clearInterval(n),e.css("border","1px solid #0d2a78"),r=60):(e.css("border"," 0px"),--r,e.prop("disabled",!0),e.val(""+r+"s"))}$("#yzm").prop("disabled",!0);var o={phone:"+86 "+$("#phone").val()};if(e(),b_checkPhone){var n,r=60;n=setInterval(function(){c($("#yzm"))},1e3),0==r&&clearInterval(n),$.ajax({type:"post",url:baseUrl+"/verify_code/send",data:o,success:function(e){}})}return!1}),$("#signUp").click(function(){$("p").remove(),e()&&c()&&o(),b_checkPhone&&b_checkPwd&&b_checkEmail&&b_verify_code&&$("#signUp").prop("disabled",!0);var n=$.cookie("key_cookie"),r=$.cookie("source"),t={phone:"+86 "+$("#phone").val(),verify_code:$("#id_verify").val(),password:$("#pwd").val(),email:$("#email").val(),questions:n,source:r};return $("#id_verify").val().length>=6&&(b_verify_code=!0),b_checkPhone&&b_checkPwd&&b_checkEmail&&b_verify_code&&$.ajax({type:"post",url:baseUrl+"/auth/signup",data:t,success:function(e){1==e.code?($("#signUp").prop("disabled",!1),window.location.href="/"):(e.code=-1)&&($("#signUp").prop("disabled",!1),$("#infor").html(e.msg))}}),!1})});