!function(){function t(t,i){this.selector=null,i?this.nodes=i:"string"==typeof t?(this.selector=t,this.nodes=document.querySelectorAll(t)):this.nodes=[t],this.length=this.nodes.length,this.el=this.nodes[0]}function i(i){return new t(i)}function e(t,e){function s(t,i,e){t=t||{},n(),i!==!1&&r(),tt=null,it=null,et=null,st=-1,nt=null,ot=null,at=null,rt=null,lt=null,ht=!1,ut=null,ct=!1,dt=null,a(t),l(),N(tt.transition_type,!0),G(),y(),D(),c(tt.play_type),O(),setTimeout(function(){e!==!0&&o()},1e3),console.log("ISMSlider Ready")}function n(){i("#"+t+"-ism-loading-mask").remove();var e=document.createElement("DIV");e.id=t+"-ism-loading-mask",e.style.position="absolute",e.style.zIndex=10,e.style.top=0,e.style.bottom=0,e.style.left=0,e.style.right=0,e.style.backgroundColor="#eee",i("#"+t).el.appendChild(e)}function o(){i("#"+t).show();var e=i("#"+t+"-ism-loading-mask");1==e.length&&i("#"+t+"-ism-loading-mask").fadeOut(400,function(){i("#"+t+"-ism-loading-mask").remove(),j(0),K(0)})}function a(e){for(var s in pt){var n=typeof pt[s];if(void 0==e[s]&&"object"!=n){var o=i("#"+t).data(s);void 0!=o&&(e[s]=o)}}tt=e||{};for(var s in pt)void 0==tt[s]&&(tt[s]=pt[s]);tt.captions=[];for(var a=i("#"+t+" ol > li"),r=a.length,l=0;r>l;l++){tt.captions[l]=[];for(var h=0;3>h;h++){var u={enable:ft[h].enable,delay:ft[h].delay},c=i(a.get(l)).find(".ism-caption-"+h);if(1==c.length){u.enable=!0;var d=c.data("delay");isNaN(d)||(u.delay=parseInt(d))}tt.captions[l][h]=u}}}function r(){for(v(),Y(),W(),w(),k(),R(),i("#"+t+" .ism-button").remove(),i("#"+t+" .ism-radios").remove(),i("#"+t+" .ism-cloned").remove(),i("#"+t+" .ism-tmp-clone").remove();i("#"+t+" .ism-frame").length>0;)i("#"+t+" .ism-slides").unwrap();i("#"+t+" .ism-img-frame").length>0&&i("#"+t+" .ism-img").unwrap(),i("#"+t+" .ism-caption").removeAttr("style"),i("#"+t+" .ism-slide").show(),i("#"+t+" .ism-slide").removeAttr("style"),i("#"+t+" .ism-slides").removeAttr("style"),i("#"+t+" .ism-img").removeClass("ism-img"),i("#"+t+" .ism-slide").removeClass("ism-slide ism-slide-0 ism-slide-1 ism-slide-2 ism-slide-3 ism-slide-4 ism-slide-5 ism-slide-6 ism-slide-7 ism-slide-8 ism-slide-9"),i("#"+t+" .ism-slides").removeClass("ism-slides"),i("#"+t).removeClass("active")}function l(){it=i("#"+t+" ol");var e=i("#"+t+" ol > li").length;et=100/e,st=0,it.addClass("ism-slides"),i("#"+t+" .ism-slides > li").addClass("ism-slide"),i("#"+t+" .ism-slides > .ism-slide > img, #"+t+" .ism-slides > .ism-slide > a > img").addClass("ism-img"),it.find("li").each(function(t){this.addClass("ism-slide-"+t)});var s="<div class='ism-frame'></div>";i("#"+t).wrapInner(s),it=i("#"+t+" ol.ism-slides");var n="<div class='ism-img-frame'></div>";i("#"+t+" .ism-img").wrap(n)}function h(){return i("#"+t+" .ism-slide").length}function u(){return st}function c(t){tt.play_type=t,_(),p()}function d(t){tt.interval=t}function p(){ht=!0,i("#"+t+" .ism-pause-button").removeClass("ism-play"),"manual"!=tt.play_type&&(clearTimeout(ut),ut=setTimeout(f,tt.interval))}function f(){var t=st+1;ht&&"manual"!=tt.play_type&&("once"==tt.play_type&&st==h()-2?(V(t),m()):"once-rewind"==tt.play_type&&st==h()-1?(V(0),m()):"loop"==tt.play_type&&st==h()-1?(V(0),p()):(V(t),p()))}function m(){ht=!1,clearTimeout(ut),ut=null,i("#"+t+" .ism-pause-button").addClass("ism-play")}function v(){m()}function g(t,i){t!=st&&(m(),V(t,i))}function y(){if(tt.buttons){var e="<div class='ism-button ism-button-prev'>&nbsp;</div><div class='ism-button ism-button-next'>&nbsp;</div>";it.after(e),ot=i("#"+t+" .ism-button-prev"),at=i("#"+t+" .ism-button-next"),ot.on("click",C),ot.on("touchstart",C),at.on("click",S),at.on("touchstart",S)}}function b(e){e!==!0||tt.buttons||(w(),i("#"+t+" .ism-button").remove(),y())}function w(){i("#"+t+" .ism-button-prev").off("click",C),i("#"+t+" .ism-button-prev").off("touchstart",C),i("#"+t+" .ism-button-next").off("click",S),i("#"+t+" .ism-button-next").off("touchstart",S)}function C(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),g(st-1)}function S(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),g(st+1)}function M(e){"thumbnail"==e?i("#"+t+" .ism-radios").addClass("ism-radios-as-thumbnails"):i("#"+t+" .ism-radios").removeClass("ism-radios-as-thumbnails")}function D(){if(tt.radios){i("#"+t).append("<ul class='ism-radios'></ul>"),rt=i("#"+t+" .ism-radios"),"thumbnail"==tt.radio_type&&rt.addClass("ism-radios-as-thumbnails");for(var e=0;e<h();e++)0==e?rt.append("<li class='ism-radio-"+e+" active'><input type='radio' name='ism-radio' class='ism-radio' id='ism-radio-"+e+"' checked='checked' /><label class='ism-radio-label' for='ism-radio-"+e+"'></label></li>"):rt.append("<li class='ism-radio-"+e+"'><input type='radio' name='ism-radio' class='ism-radio' id='ism-radio-"+e+"' /><label class='ism-radio-label' for='ism-radio-"+e+"'></label></li>");i("#"+t+" .ism-radios input.ism-radio, #"+t+" .ism-radios .ism-radio-label").on("click",A),i("#"+t+" .ism-radios input.ism-radio, #"+t+" .ism-radios .ism-radio-label").on("touchstart",A)}}function T(t){}function k(){i("#"+t+" .ism-radios input.ism-radio, #"+t+" .ism-radios .ism-radio-label").off("click",A),i("#"+t+" .ism-radios input.ism-radio, #"+t+" .ism-radios .ism-radio-label").off("touchstart",A)}function A(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation();var e=i(t.target.parentNode).index();g(e)}function x(e){if(tt.radios){i("#"+t+" .ism-radios li").removeClass("active");var s=i("#"+t+" .ism-radios li").get(e);i(s).addClass("active"),i(s).find("input").attr("checked","checked")}}function _(){if(R(),i("#"+t+" .ism-pause-button").remove(),tt.pause_button&&"manual"!=tt.play_type){var e="<div class='ism-pause-button'>&nbsp;</div>";it.after(e),lt=i("#"+t+" .ism-pause-button"),lt.on("click",L),lt.on("touchstart",L)}}function R(){i("#"+t+" .ism-pause-button").off("click",L),i("#"+t+" .ism-pause-button").off("touchstart",L)}function L(t){t.preventDefault(),t.stopPropagation(),ht?m():p()}function O(){var e=i("#"+t).get(0),s=it.get(0);dt=new Dragdealer(e,s,{steps:h(),x:0,speed:.2,loose:!0,requestAnimationFrame:!0,dragStartCallback:function(){m()},dragStopCallback:function(t,i){var e=dt.getStep()[0]-1;new_slide_index=e,m(),I(new_slide_index)},onAfterGlide:function(){dt.setStep(st+1,1,!0)}}),window.onload=function(){setTimeout(function(){dt.reflow()},150),setTimeout(function(){dt.reflow()},600)}}function W(){dt&&dt.unbindEventListeners()}function E(){dt&&(dt.setStep(st+1,1,!0),dt.reflow())}function F(t,i){mt[t]&&mt[t].apply(this,i)}function H(t,i){mt[t]=i}function N(e,s){if(1==s||e!=tt.transition_type){tt.transition_type=e,i("#"+t+" .ism-slide").removeClass("ism-zoom-in"),i("#"+t+" .ism-slide").show();var n=h();it.css("width",100*n+"%"),it.find(".ism-slide").each(function(t){var i=et*t+"%",e=100/n+"%";this.css("width",e),this.css("left",i)})}}function V(t,i){if(ct!==!0&&t!=st){ct=!0;var e=st;t=parseInt(t),0>t?t=h()-1:t>=h()&&(t=0),z(e,t),"instant"==tt.transition_type?P(e,t,i):"slide"==tt.transition_type?q(e,t,i):"fade"==tt.transition_type?B(e,t,!1,i):"zoom"==tt.transition_type&&B(e,t,!0,i)}}function z(t,i){x(i),st=i,F("beforetransition",[i])}function P(t,i,e){dt.setStep(i+1,1,!0),U(t,i,!0,e)}function q(t,i,e){var s=i/(h()-1);dt.startSlide(s,function(){U(t,i,!0,e)})}function B(e,s,n,o){i("#"+t+" li.ism-slide").removeClass("ism-zoom-in");var a=i("#"+t+" li.ism-slide-"+e),r=it.clone();r.addClass("ism-slides-clone");var l=s/(h()-1),u=dt.getOffsetsByRatios([l,0]);r.css("transform","translateX("+u[0]+"px)"),r.insertAfter(it.el),n&&a.addClass("ism-zoom-in"),r.fadeIn(2*tt.transition_duration,function(){dt.setStep(s+1,1,!0),i("#"+t+" .ism-slides-clone").remove(),i("#"+t+" .ism-slides").show(),i("#"+t+" .ism-slides").css("opacity",null),U(e,s,!0,o),console.log("fadeIn ok")}),it.fadeOut(2*tt.transition_duration*.9,function(){console.log("fadeOut ok")})}function I(t){var i=st;st=t,F("afterswipe",[t]),x(t),U(i,t,!1)}function U(e,s,n,o){s=parseInt(s),i("#"+t+" .ism-slides-clone").remove(),i("#"+t+" .ism-slides").show(),i("#"+t+" li.ism-slide").removeClass("ism-zoom-in"),n&&E(),o&&o(),j(s),K(s),ct=!1,F("aftertransition",[s])}function X(t){t!=tt.image_fx?(tt.image_fx=t,j(st)):tt.image_fx=t}function j(e){Y(),"none"!=tt.image_fx&&("zoompan"==tt.image_fx?i("#"+t+" .ism-slide-"+e+" .ism-img-frame").addClass("ism-zoom-pan"):"zoomrotate"==tt.image_fx&&i("#"+t+" .ism-slide-"+e+" .ism-img-frame").addClass("ism-zoom-rotate"))}function Y(){i("#"+t+" .ism-slide .ism-img-frame").removeClass("ism-zoom-pan"),i("#"+t+" .ism-slide .ism-img-frame").removeClass("ism-zoom-rotate")}function G(){it.find("#"+t+" .ism-caption").css("visibility","hidden")}function $(t,i,e){tt.captions[t][i].enable=e}function J(t,i,e){tt.captions[t][i].delay=e}function K(t){it.find(".ism-caption").css("visibility","hidden"),it.find(".ism-caption").removeClass("ism-caption-anim"),Q(t,0),Q(t,1),Q(t,2)}function Q(t,i){tt.captions[t]&&1==tt.captions[t][i].enable&&setTimeout(function(){it.find(".ism-slide-"+t+" .ism-caption-"+i).css("visibility","visible"),it.find(".ism-slide-"+t+" .ism-caption-"+i).addClass("ism-caption-anim")},tt.captions[t][i].delay)}function Z(i){var e=document.getElementById(t);e.id=i,t=i}var tt,it,et,st,nt,ot,at,rt,lt,ht,ut,ct,dt,pt={transition_type:"slide",play_type:"manual",interval:7e3,image_fx:"none",buttons:!0,radios:!0,radio_type:"button",pause_button:!0,transition_duration:350,swipe:!0},ft=[{enable:!1,delay:0},{enable:!1,delay:200},{enable:!1,delay:400}],mt={};s(e,!1,e.prevent_stop_loading||!1),this.init=s,this.deinit=r,this.stopLoading=o,this.transition=V,this.listen=H,this.reflow=E,this.setTransitionType=N,this.setPlayType=c,this.setInterval=d,this.setImageFx=X,this.setCaptionEnable=$,this.setCaptionDelay=J,this.enableButtons=b,this.enableRadios=T,this.setRadioType=M,this.getSlideCount=h,this.getActiveSlideIndex=u,this.setElementId=Z}t.prototype.get=function(t){return this.nodes[t]},t.prototype.find=function(i){var e=this.el,s=e.querySelectorAll(i);return new t(null,s)},t.prototype.index=function(){for(var t=this.el,i=0;null!=(t=t.previousSibling);)i++;return i},t.prototype.each=function(i){for(var e=0;e<this.nodes.length;e++){var s=this.nodes[e],n=new t(s);i.call(n,e,n)}},t.prototype.remove=function(){for(var t=0;t<this.nodes.length;t++){var i=this.nodes[t];i.parentNode.removeChild(i)}},t.prototype.removeAttr=function(t){for(var i=0;i<this.nodes.length;i++){var e=this.nodes[i];e.removeAttribute(t)}},t.prototype.attr=function(t,i){var e=this.el;return void 0==i?e.getAttribute(t):void e.setAttribute(t,i)},t.prototype.data=function(t){var i=this.el;return i.getAttribute("data-"+t)},t.prototype.hasClass=function(t){var i=this.el;return i.classList?i.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(i.className)},t.prototype.addClass=function(t){for(var i=0;i<this.nodes.length;i++){var e=this.nodes[i];e.classList?e.classList.add(t):e.className+=" "+t}},t.prototype.removeClass=function(t){for(var i=0;i<this.nodes.length;i++){var e=this.nodes[i];e.classList?e.classList.remove(t.split(" ")):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}},t.prototype.show=function(){for(var t=0;t<this.nodes.length;t++){var i=this.nodes[t];i&&i.style&&(i.style.display="")}},t.prototype.hide=function(){for(var t=0;t<this.nodes.length;t++){var i=this.el;i&&i.style&&(i.style.display="none")}},t.prototype.css=function(t,i){for(var e=0;e<this.nodes.length;e++){var s=this.nodes[e];s.style[t]=i}},t.prototype.fadeIn=function(t,i){var e=this.el;t=t||400;var s=0;e.style.opacity=0,e.style.filter="";var n=+new Date,o=function(){s+=(new Date-n)/t,e.style.opacity=s,e.style.filter="alpha(opacity="+100*s|"0)",n=+new Date,1>s?window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16):i&&i()};o()},t.prototype.fadeOut=function(t,i){var e=this.el;t=t||400;var s=1;e.style.opacity=1,e.style.filter="";var n=+new Date,o=function(){s-=(new Date-n)/t,e.style.opacity=s,e.style.filter="alpha(opacity="+100*s|"0)",n=+new Date,s>0?window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16):i&&i()};o()},t.prototype.wrap=function(i){for(var e=0;e<this.nodes.length;e++){var s=this.nodes[e],n=new t(s).index(),o=s.outerHTML,a=s.parentNode;s.insertAdjacentHTML("beforebegin",i),a.removeChild(s);var r=a.childNodes[n];r.innerHTML=o}},t.prototype.wrapInner=function(t){var i=this.el,e=i.innerHTML;i.innerHTML=t,i.firstChild.innerHTML=e},t.prototype.unwrap=function(){var t=this.el;t.parentNode.outerHTML=t.parentNode.innerHTML},t.prototype.after=function(t){var i=this.el;i.insertAdjacentHTML("afterend",t)},t.prototype.append=function(t){var i=this.el;i.insertAdjacentHTML("beforeend",t)},t.prototype.insertAfter=function(t){var i=this.el;t.parentNode.insertBefore(i,t.nextSibling)},t.prototype.clone=function(){var i=this.el;return new t(i.cloneNode(!0))},t.prototype.on=function(t,i){for(var e=0;e<this.nodes.length;e++){var s=this.nodes[e];s.addEventListener?s.addEventListener(t,i):s.attachEvent("on"+t,function(){i.call(s)})}},t.prototype.off=function(t,i){for(var e=0;e<this.nodes.length;e++){var s=this.nodes[e];s&&(s.removeEventListener?s.removeEventListener(t,i):s.detachEvent("on"+t,i))}},i.ready=function(t){console.log("document.readyState("+document.readyState+") document.addEventListener("+!!document.addEventListener+")"),"complete"===document.readyState?setTimeout(t,1):document.addEventListener?document.addEventListener("DOMContentLoaded",t,!1):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&t()})},window.ISM=window.ISM||{},window.ISM.Slider=e,window.ISM.Config=window.ISM.Config||{},window.ISM.instances=[],i.ready(function(){if(console.log("iq.ready"),window.ISM.Config.no_instantiation!==!0){var t=i(".ism-slider");console.log(t+" - "+t.length);for(var s=0;s<t.length;s++){console.log("["+s+"]");var n=t.get(s);n.id=n.id||"ism-slider-"+s,window.ISM.instances.push(new e(n.id,{}))}}})}(),function(t,i){"function"==typeof define&&define.amd?define(i):t.Dragdealer=i()}(this,function(){function t(t){var i="Webkit Moz ms O".split(" "),e=document.documentElement.style;if(void 0!==e[t])return t;t=t.charAt(0).toUpperCase()+t.substr(1);for(var s=0;s<i.length;s++)if(void 0!==e[i[s]+t])return i[s]+t}function i(t){u.backfaceVisibility&&u.perspective&&(t.style[u.perspective]="1000px",t.style[u.backfaceVisibility]="hidden")}var e=function(t,i,e){this.options=this.applyDefaults(e||{}),this.bindMethods(),this.wrapper=t,this.handle=i,this.init(),this.bindEventListeners()};e.prototype={defaults:{disabled:!1,horizontal:!0,vertical:!1,slide:!0,steps:0,snap:!1,loose:!1,speed:.1,xPrecision:0,yPrecision:0,activeClass:"active",css3:!0,tapping:!0,afterSwipeCallback:function(){}},init:function(){this.options.css3&&i(this.handle),this.value={prev:[-1,-1],current:[this.options.x||0,this.options.y||0],target:[this.options.x||0,this.options.y||0]},this.offset={wrapper:[0,0],mouse:[0,0],prev:[-999999,-999999],current:[0,0],target:[0,0]},this.change=[0,0],this.stepRatios=this.calculateStepRatios(),this.activity=!1,this.dragging=!1,this.tapping=!1,this.sliding=!1,this.slide_count=0,this.reflow(),this.options.disabled&&this.disable()},applyDefaults:function(t){for(var i in this.defaults)t.hasOwnProperty(i)||(t[i]=this.defaults[i]);return t},calculateStepRatios:function(){var t=[];if(this.options.steps>=1)for(var i=0;i<=this.options.steps-1;i++)this.options.steps>1?t[i]=i/(this.options.steps-1):t[i]=0;return t},setWrapperOffset:function(){this.offset.wrapper=h.get(this.wrapper)},calculateBounds:function(){var t={top:this.options.top||0,bottom:-(this.options.bottom||0)+this.wrapper.offsetHeight,left:this.options.left||0,right:-(this.options.right||0)+this.wrapper.offsetWidth};return t.availWidth=t.right-t.left-this.handle.offsetWidth,t.availHeight=t.bottom-t.top-this.handle.offsetHeight,t},calculateValuePrecision:function(){var t=this.options.xPrecision||Math.abs(this.bounds.availWidth),i=this.options.yPrecision||Math.abs(this.bounds.availHeight);return[t?1/t:0,i?1/i:0]},bindMethods:function(){"function"==typeof this.options.customRequestAnimationFrame?this.requestAnimationFrame=s(this.options.customRequestAnimationFrame,window):this.requestAnimationFrame=s(d,window),"function"==typeof this.options.customCancelAnimationFrame?this.cancelAnimationFrame=s(this.options.customCancelAnimationFrame,window):this.cancelAnimationFrame=s(p,window),this.animateWithRequestAnimationFrame=s(this.animateWithRequestAnimationFrame,this),this.animate=s(this.animate,this),this.onHandleMouseDown=s(this.onHandleMouseDown,this),this.onHandleTouchStart=s(this.onHandleTouchStart,this),this.onDocumentMouseMove=s(this.onDocumentMouseMove,this),this.onWrapperTouchMove=s(this.onWrapperTouchMove,this),this.onWrapperMouseDown=s(this.onWrapperMouseDown,this),this.onWrapperTouchStart=s(this.onWrapperTouchStart,this),this.onDocumentMouseUp=s(this.onDocumentMouseUp,this),this.onDocumentTouchEnd=s(this.onDocumentTouchEnd,this),this.onHandleClick=s(this.onHandleClick,this),this.onWindowResize=s(this.onWindowResize,this)},bindEventListeners:function(){n(this.handle,"mousedown",this.onHandleMouseDown),n(this.handle,"touchstart",this.onHandleTouchStart),n(document,"mousemove",this.onDocumentMouseMove),n(this.wrapper,"touchmove",this.onWrapperTouchMove),n(this.wrapper,"mousedown",this.onWrapperMouseDown),n(this.wrapper,"touchstart",this.onWrapperTouchStart),n(document,"mouseup",this.onDocumentMouseUp),n(document,"touchend",this.onDocumentTouchEnd),n(this.handle,"click",this.onHandleClick),n(window,"resize",this.onWindowResize),this.animate(!1,!0),this.interval=this.requestAnimationFrame(this.animateWithRequestAnimationFrame)},unbindEventListeners:function(){o(this.handle,"mousedown",this.onHandleMouseDown),o(this.handle,"touchstart",this.onHandleTouchStart),o(document,"mousemove",this.onDocumentMouseMove),o(this.wrapper,"touchmove",this.onWrapperTouchMove),o(this.wrapper,"mousedown",this.onWrapperMouseDown),o(this.wrapper,"touchstart",this.onWrapperTouchStart),o(document,"mouseup",this.onDocumentMouseUp),o(document,"touchend",this.onDocumentTouchEnd),o(this.handle,"click",this.onHandleClick),o(window,"resize",this.onWindowResize),this.cancelAnimationFrame(this.interval)},onHandleMouseDown:function(t){t.target&&"A"==t.target.tagName&&t.target.className.search(/ism-caption/)>=0&&(document.location=t.target.href),l.refresh(t),a(t),r(t),this.activity=!1,this.startDrag()},onHandleTouchStart:function(t){t.target&&"A"==t.target.tagName&&t.target.className.search(/ism-caption/)>=0&&(document.location=t.target.href),l.refresh(t),r(t),this.activity=!1,this.startDrag()},onDocumentMouseMove:function(t){l.refresh(t),this.dragging&&(this.activity=!0,a(t))},onWrapperTouchMove:function(t){return l.refresh(t),!this.activity&&this.draggingOnDisabledAxis()?void(this.dragging&&this.stopDrag()):(a(t),void(this.activity=!0))},onWrapperMouseDown:function(t){t.target&&t.target.className.search(/ism-(button|radio|caption)/)>=0||(l.refresh(t),a(t),this.startTap())},onWrapperTouchStart:function(t){l.refresh(t),a(t),this.startTap()},onDocumentMouseUp:function(t){this.stopDrag(),this.stopTap(),t.target&&t.target.className.search(/ism-(button|radio|caption)/)>=0||this.options.afterSwipeCallback()},onDocumentTouchEnd:function(t){this.stopDrag(),this.stopTap(),this.options.afterSwipeCallback()},onHandleClick:function(t){t.target&&t.target.className.search(/ism-(button|radio)/)>=0||this.activity&&(a(t),r(t))},onWindowResize:function(t){this.reflow()},enable:function(){this.disabled=!1,this.handle.className=this.handle.className.replace(/\s?disabled/g,"")},disable:function(){this.disabled=!0,this.handle.className+=" disabled"},reflow:function(){this.setWrapperOffset(),this.bounds=this.calculateBounds(),this.valuePrecision=this.calculateValuePrecision(),this.updateOffsetFromValue()},getStep:function(){return[this.getStepNumber(this.value.target[0]),this.getStepNumber(this.value.target[1])]},getValue:function(){return this.value.target},setStep:function(t,i,e){this.setValue(this.options.steps&&t>1?(t-1)/(this.options.steps-1):0,this.options.steps&&i>1?(i-1)/(this.options.steps-1):0,e)},setValue:function(t,i,e){this.setTargetValue([t,i||0]),e&&(this.groupCopy(this.value.current,this.value.target),this.updateOffsetFromValue(),this.callAnimationCallback())},startTap:function(){!this.disabled&&this.options.tapping&&(this.tapping=!0,this.setWrapperOffset(),this.setTargetValueByOffset([l.x-this.offset.wrapper[0]-this.handle.offsetWidth/2,l.y-this.offset.wrapper[1]-this.handle.offsetHeight/2]))},stopTap:function(){!this.disabled&&this.tapping&&(this.tapping=!1,this.setTargetValue(this.value.current))},startDrag:function(){this.disabled||(this.dragging=!0,this.interval=this.requestAnimationFrame(this.animateWithRequestAnimationFrame),this.setWrapperOffset(),this.offset.mouse=[l.x-h.get(this.handle)[0],l.y-h.get(this.handle)[1]],this.wrapper.className.match(this.options.activeClass)||(this.wrapper.className+=" "+this.options.activeClass),this.callDragStartCallback())},stopDrag:function(){if(!this.disabled&&this.dragging){this.dragging=!1;var t=this.groupClone(this.value.current);if(this.options.slide){var i=this.change;t[0]+=4*i[0],t[1]+=4*i[1]}this.setTargetValue(t),this.wrapper.className=this.wrapper.className.replace(" "+this.options.activeClass,""),this.callDragStopCallback()}},callAnimationCallback:function(){var t=this.value.current;this.options.snap&&this.options.steps>1&&(t=this.getClosestSteps(t)),this.groupCompare(t,this.value.prev)||("function"==typeof this.options.animationCallback&&this.options.animationCallback.call(this,t[0],t[1]),this.groupCopy(this.value.prev,t))},callTargetCallback:function(){"function"==typeof this.options.callback&&this.options.callback.call(this,this.value.target[0],this.value.target[1])},callDragStartCallback:function(){"function"==typeof this.options.dragStartCallback&&this.options.dragStartCallback.call(this,this.value.target[0],this.value.target[1])},callDragStopCallback:function(){"function"==typeof this.options.dragStopCallback&&this.options.dragStopCallback.call(this,this.value.target[0],this.value.target[1])},startSlide:function(t,i){this.slide_callback=i,this.sliding=!0,this.value.target[0]=t,this.slide_start=this.value.current[0],this.step_size=Math.abs(this.value.target[0]-this.value.current[0]),this.interval=this.requestAnimationFrame(this.animateWithRequestAnimationFrame)},animateWithRequestAnimationFrame:function(t){t?(this.timeOffset=this.timeStamp?t-this.timeStamp:0,this.timeStamp=t):this.timeOffset=25,this.sliding?this.animateSlide():this.animate(),this.sliding||this.dragging||this.value.target[0]!=this.value.current[0]?this.interval=this.requestAnimationFrame(this.animateWithRequestAnimationFrame):this.options.onAfterGlide()},animate:function(t,i){if(!t||this.dragging){if(this.dragging){var e=this.groupClone(this.value.target),s=[l.x-this.offset.wrapper[0]-this.offset.mouse[0],l.y-this.offset.wrapper[1]-this.offset.mouse[1]];this.setTargetValueByOffset(s,this.options.loose),this.change=[this.value.target[0]-e[0],this.value.target[1]-e[1]]}(this.dragging||i)&&this.groupCopy(this.value.current,this.value.target),(this.dragging||this.glide()||i)&&(this.updateOffsetFromValue(),this.callAnimationCallback())}},glide:function(){var t=[this.value.target[0]-this.value.current[0],this.value.target[1]-this.value.current[1]];return t[0]||t[1]?(Math.abs(t[0])>this.valuePrecision[0]||Math.abs(t[1])>this.valuePrecision[1]?(this.value.current[0]+=t[0]*Math.min(this.options.speed*this.timeOffset/25,1),this.value.current[1]+=t[1]*Math.min(this.options.speed*this.timeOffset/25,1)):this.groupCopy(this.value.current,this.value.target),!0):!1},animateSlide:function(){for(var t=this.value.target[0]-this.value.current[0],i=t>=0?1:-1,e=Math.abs(t),s=(this.value.current[0]-this.slide_start)/(this.value.target[0]-this.slide_start),n=s-.5,o=(-3*n*n+.8)*this.step_size*.08;o>e;)o*=.5;s>.995?(this.groupCopy(this.value.current,this.value.target),this.sliding=!1,this.slide_callback()):this.value.current[0]+=i*o,this.updateOffsetFromValue(),this.renderHandlePosition(),isNaN(s)},updateOffsetFromValue:function(){this.options.snap?this.offset.current=this.getOffsetsByRatios(this.getClosestSteps(this.value.current)):this.offset.current=this.getOffsetsByRatios(this.value.current),this.groupCompare(this.offset.current,this.offset.prev)||(this.renderHandlePosition(),this.groupCopy(this.offset.prev,this.offset.current))},renderHandlePosition:function(){var t="";return this.options.css3&&u.transform?(this.options.horizontal&&(t+="translateX("+this.offset.current[0]+"px)"),void(this.handle.style[u.transform]=t)):void(this.options.horizontal&&(this.handle.style.left=this.offset.current[0]+"px"))},setTargetValue:function(t,i){var e=i?this.getLooseValue(t):this.getProperValue(t);this.groupCopy(this.value.target,e),this.offset.target=this.getOffsetsByRatios(e),this.callTargetCallback()},setTargetValueByOffset:function(t,i){var e=this.getRatiosByOffsets(t),s=i?this.getLooseValue(e):this.getProperValue(e);this.groupCopy(this.value.target,s),this.offset.target=this.getOffsetsByRatios(s)},getLooseValue:function(t){var i=this.getProperValue(t);return[i[0]+(t[0]-i[0])/4,i[1]+(t[1]-i[1])/4]},getProperValue:function(t){var i=this.groupClone(t);return i[0]=Math.max(i[0],0),i[1]=Math.max(i[1],0),i[0]=Math.min(i[0],1),i[1]=Math.min(i[1],1),(!this.dragging&&!this.tapping||this.options.snap)&&this.options.steps>1&&(i=this.getClosestSteps(i)),i},getRatiosByOffsets:function(t){return[this.getRatioByOffset(t[0],this.bounds.availWidth,this.bounds.left),this.getRatioByOffset(t[1],this.bounds.availHeight,this.bounds.top)]},getRatioByOffset:function(t,i,e){return i?(t-e)/i:0},getOffsetsByRatios:function(t){return[this.getOffsetByRatio(t[0],this.bounds.availWidth,this.bounds.left),this.getOffsetByRatio(t[1],this.bounds.availHeight,this.bounds.top)]},getOffsetByRatio:function(t,i,e){return Math.round(t*i)+e},getStepNumber:function(t){return this.getClosestStep(t)*(this.options.steps-1)+1},getClosestSteps:function(t){return[this.getClosestStep(t[0]),this.getClosestStep(t[1])]},getClosestStep:function(t){for(var i=0,e=1,s=0;s<=this.options.steps-1;s++)Math.abs(this.stepRatios[s]-t)<e&&(e=Math.abs(this.stepRatios[s]-t),i=s);return this.stepRatios[i]},groupCompare:function(t,i){return t[0]==i[0]&&t[1]==i[1]},groupCopy:function(t,i){t[0]=i[0],t[1]=i[1]},groupClone:function(t){return[t[0],t[1]]},draggingOnDisabledAxis:function(){return!this.options.horizontal&&l.xDiff>l.yDiff||!this.options.vertical&&l.yDiff>l.xDiff}};for(var s=function(t,i){return function(){return t.apply(i,arguments)}},n=function(t,i,e){t.addEventListener?t.addEventListener(i,e,!1):t.attachEvent&&t.attachEvent("on"+i,e)},o=function(t,i,e){t.removeEventListener?t.removeEventListener(i,e,!1):t.detachEvent&&t.detachEvent("on"+i,e)},a=function(t){t||(t=window.event),t.preventDefault&&t.preventDefault(),t.returnValue=!1},r=function(t){t||(t=window.event),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},l={x:0,y:0,xDiff:0,yDiff:0,refresh:function(t){t||(t=window.event),"mousemove"==t.type?this.set(t):t.touches&&this.set(t.touches[0])},set:function(t){var i=this.x,e=this.y;t.clientX||t.clientY?(this.x=t.clientX,this.y=t.clientY):(t.pageX||t.pageY)&&(this.x=t.pageX-document.body.scrollLeft-document.documentElement.scrollLeft,this.y=t.pageY-document.body.scrollTop-document.documentElement.scrollTop),this.xDiff=Math.abs(this.x-i),this.yDiff=Math.abs(this.y-e)}},h={get:function(t){var i={left:0,top:0};return void 0!==t.getBoundingClientRect&&(i=t.getBoundingClientRect()),[i.left,i.top]}},u={transform:t("transform"),perspective:t("perspective"),backfaceVisibility:t("backfaceVisibility")},c=["webkit","moz"],d=window.requestAnimationFrame,p=window.cancelAnimationFrame,f=0;f<c.length&&!d;++f)d=window[c[f]+"RequestAnimationFrame"],p=window[c[f]+"CancelAnimationFrame"]||window[c[f]+"CancelRequestAnimationFrame"];return d||(d=function(t){return setTimeout(t,25)},p=clearTimeout),e});